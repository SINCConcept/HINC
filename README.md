# Harmonizing IoT, Network Functions and Cloud: Resource Slice Interoperability. 

The work is initially supported by the U-TEST until 2016. Since 2017 the work is supported 
by H2020 INTER-IoT  through the INTER-HINC project.

If you use the software, pls. cite the following papers:

- Hong-Linh Truong, Towards a Resource Slice Interoperability Hub for IoT, [Preprint PDF](http://www.infosys.tuwien.ac.at/staff/truong/publications/2018/rsihub_draft_jan18.pdf), 3rd edition of Globe-IoT 2018: Towards Global Interoperability among IoT Systems, IEEE, 2018. Orlando, Florida, USA, April 17-20, 2018. 

- Duc-Hung Le, Nanjangud Narendra, Hong-Linh Truong HINC - Harmonizing Diverse Resource Information Across IoT, Network Functions and Clouds [Submitted PDF](http://bit.ly/1Y36tIY), The IEEE 4th International Conference on Future Internet of Things and Cloud (FiCloud2016), 22-24 Aug, 2016, Vienna, 
Austria.

## Project Organization

### Global Management Service

This module can be found in the directory `global-management-service`.

The module is a spring boot application. It serves as a RESTful API interface to query and control resources and their providers through AMQP.

View the README.md in the project for more information about startup and configuration

### Local Management Service

This module can be found in the directory `local-management-service`

The module is a spring boot application. It uses AMQP to query and send controls to different 
resource providers through the use of adaptors found in `ext-plugin`. The local itself is a microservices 
whose opertions can be utilized purely through AMQP in the messaging protocol described below. However, the global management service
is designed to expose these operations through a RESTful API. 

View the README.md in the project for more information about startup and configuration

### Repository

This module contains all database specific libraries for the global and local management services

### Common

This is a java library containing all common modules and interfaces for the other java projects

### ext-plugin

This directory houses all the adaptor projects. Adaptors are standalone applications that communicate with a given
local management service through AMQP (messaging protocol described below). The technology stack for an adaptor implementation
is left at the discretion of the user as long asn the messaging protocol is followed. One adaptor interfaces with one Resource Provider

### Slice Management Client (A.K.A pizza.js)

This node.js project is a CLI that interfaces with a global management service to create and manage resource slice. 
The CLI is documented in the typical POSIX fashion, simply append `--help` at the end of each command to view usage instructions.

Simply go the the project, run `npm install` to install dependencies and `node pizza.js` to run the client.

### examples

This node.js project is designed to help a developer avoid all the configuration heavy steps to deploy a working system. 
On runnning this application, it will ask for several configuration parameters (i.e. AMQP broker connection string) and proceed
to autogenerate configuration for globals, locals, adaptors, providers etc... and make them all available in a single 
`docker-compose.yml` file

## Compilation

### Java Modules

* global
* local
* common
* respository

Compile all java modules with the command `$ maven clean install`

## Nodejs Modules

Navigate to the proect and run `$ npm install` to install dependencies, follow the provided README.md to start the module

## Contact
Hong-Linh Truong <hong-linh.truong@tuwien.ac.at>


## Messaging Protocol

### Local Messaging Protocol

This section documents the messaging protocol  (i.e. message types) to use the services of the local management service (which are used by the global)

* `REGISTER_LMS`: A local sends this message to the global to register itself. On reception, the global adds this local and binds its
queues to the relevant AMQP exchanges. The payload is autogenerated by the local on startup assuming correct configuration (see its README)

* `FETCH_RESOURCES`: A resource query, this is sent to the local with no payload. It forces the local to 
query its adaptors for all available resources

* `DELIVER_RESOURCES`: The reply to FETCH_RESOURCES. Is sent by the local. The payload is a JSON list of Resource documents

* `FETCH_PROVIDERS`:  A provider query, this is send to the local with no payload. It forces the local to
query its adaptors for all available resource providers along with (i.e.) resources that can be provisioned

* `DELIVER_PROVIDERS`: The reply to FETCH_PROVIDERS. Is sent by the local. The payload is a JSON list of Resource Provider objects

### Adaptor Messaging Protocol

This section documents the messaging protocol (i.e. message types) between an adaptor and a local management service

* `QUERY_RESOURCES` : A resource query, this is sent by the local with no payload. It forces the adaptor to 
query the provider for all available resources

* `UPDATE_RESOURCES`: The reply to QUERY_RESOURCES. Is sent by the adaptor. The payload is a JSON list of Resource documents

* `QUERY_PROVIDER`: A provider query, this is send by the local with no payload. It forces the adaptor to
query the provider for all available resources (i.e.) resources that can be provisioned

* `UPDATE_PROVIDER`: The reply to QUERY_PROVIDER. Is sent by the adaptor. The payload is a JSON document describing the provider and available resources

* `REGISTER_ADAPTOR`: The adaptor sends this message to an available local management service to register. The payload is a json document 
`{"adaptorName":"<name of the adaptor>"}` the adaptorName should be the the ID of the adaptor as well as the name of the queue it is listening on


The following message types are controls to send to the resource providers

* `PROVISION`: A control to provision a particular resource. The payload is a JSON document describing a resource to be provisioned. This message
is sent from the local to the correct adaptor (the adaptor id is found in the resource document). Expects a Resource JSON as return 

* `DELETE`: A control to delete a particular resource. The payload is a JSON document describing a resource to be deleted. This message
is sent from the local to the correct adaptor (the adaptor id is found in the resource document). Expects a Resource JSON as return 

* `CONFIGURE`: A control to configure a particular resource. The payload is a JSON document describing a resource to be configure. This message
is sent from the local to the correct adaptor (the adaptor id is found in the resource document). Expects a Resource JSON as return

* `GET_LOGS`: A control to fetch the logs of a particular resource. The payload is a JSON document describing a resource. This message
is sent from the local to the correct adaptor (the adaptor id is found in the resource document). Expects a JSON document with log metadata as return 

* `CONTROL_RESULT`: This message is sent from the adaptor to the Local on control execution the result can be successful or a failed one.
The payload of the message depends on what the control expects or an error object if there is an error



------------------------
Copyright 2016-2017, by TU Wien.
Licensed under the Apache License, Version 2.0 (http://www.apache.org/licenses/LICENSE-2.0).



